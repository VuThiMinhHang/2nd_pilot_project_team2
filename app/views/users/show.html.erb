<% provide(:title, @user.name) %>
<div class="main-content">
  <section>
    <%= render "shared/micropost_form", user: current_user %>
  </section>
  <% if current_user?(@user) %>
    <h3> My page</h3>
    <ul class="posts">
      <% @microposts.each do |micropost| %>
        <% if micropost.friend_id == current_user.id %>
          <% unless micropost.user_id == current_user.id %>
            <%= micropost.user.name %> TO <%= current_user.name %>
          <% end %>
          <% if current_user?(@user)||current_user.friends.include?(@user) %>
            <%= render "shared/list_microposts", micropost: micropost %>
          <% end %> 
        <% end %> 
      <% end %>
    </ul>
  <% else %> 
    <h3> 
      Time line
    </h3>
    <ul class="posts">
      <% @microposts.each do |micropost| %>
        <% if micropost.friend_id == @user.id && micropost.is_public?%>
          <% unless micropost.user_id == micropost.friend_id %>
            <%= micropost.user.name %> TO <%= @user.name %>
          <% end %>
          <%= render "shared/list_microposts", micropost: micropost %>
        <% end %> 
      <% end %>
    </ul>
  <% end %>
  </div>
  <div class="right-sidebar">
      <section>
        <%#= render "shared/activities" %>
      </section>
    </div>
</div>